-- Salt V5.1 (V5 Code + Tabs) â€” Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¸Ð´ÐµÐ°Ð»ÑŒÐ½Ð¾!
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local mouse = player:GetMouse()
local camera = Workspace.CurrentCamera

local Settings = {
    Fly = false, FlySpeed = 50,
    Noclip = false,
    Speed = 16,
    InfiniteJump = false,
    ESP = false,
    Aimbot = false, AimbotFOV = 120, AimbotSmooth = 0.15, TeamCheck = true
}

local flyBodyVelocity = nil
local noclipConnection = nil
local espConnection = nil
local aimbotConnection = nil
local drawings = {boxes = {}, names = {}, fovCircle = nil}

-- GUI
local sg = Instance.new("ScreenGui")
sg.Name = "SaltV51"
sg.ResetOnSpawn = false
sg.ZIndexBehavior = Enum.ZIndexBehavior.Global
sg.DisplayOrder = 10
sg.Parent = game:GetService("CoreGui")

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 250, 0, 400)
mainFrame.Position = UDim2.new(0, 15, 0, 15)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = sg
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = mainFrame

-- Shadow
local shadow = Instance.new("Frame")
shadow.Size = UDim2.new(1, 4, 1, 4)
shadow.Position = UDim2.new(0, -2, 0, -2)
shadow.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
shadow.BackgroundTransparency = 0.7
shadow.ZIndex = -1
shadow.Parent = mainFrame
Instance.new("UICorner", shadow).CornerRadius = UDim.new(0, 14)

-- Title (drag)
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 45)
title.BackgroundTransparency = 1
title.Text = "Salt V5.1"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 28
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Center
title.Parent = mainFrame

local dragging = false
local dragStart, startPos
title.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)
title.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)
UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
end)

-- Ð¢Ð°Ð±Ñ‹
local tabBar = Instance.new("Frame")
tabBar.Size = UDim2.new(1, -20, 0, 35)
tabBar.Position = UDim2.new(0, 10, 0, 50)
tabBar.BackgroundTransparency = 1
tabBar.Parent = mainFrame

local tabs = {"Movement", "Visuals", "Combat"}
local tabContents = {}

for i, tabName in ipairs(tabs) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1/#tabs, 0, 1, 0)
    btn.Position = UDim2.new((i-1)/#tabs, 0, 0, 0)
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.Text = tabName
    btn.TextColor3 = Color3.fromRGB(200, 200, 200)
    btn.Font = Enum.Font.GothamSemibold
    btn.TextSize = 15
    btn.Parent = tabBar
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

    local content = Instance.new("ScrollingFrame")
    content.Size = UDim2.new(1, -20, 1, -95)
    content.Position = UDim2.new(0, 10, 0, 90)
    content.BackgroundTransparency = 1
    content.BorderSizePixel = 0
    content.ScrollBarThickness = 4
    content.CanvasSize = UDim2.new(0, 0, 0, 400)
    content.Visible = i == 1
    content.Parent = mainFrame
    tabContents[tabName] = content

    btn.MouseButton1Click:Connect(function()
        for _, c in pairs(tabContents) do c.Visible = false end
        tabContents[tabName].Visible = true
        for _, b in pairs(btns) do b.BackgroundColor3 = Color3.fromRGB(50, 50, 50) end
        btn.BackgroundColor3 = Color3.fromRGB(0, 200, 120)
    end)
end
local btns = tabBar:GetChildren()

-- ÐŸÐ»Ð°Ð²Ð½Ñ‹Ðµ Ñ‚Ð¾Ñ‡ÐºÐ¸ (Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ñ‹Ðµ, dt)
local particles = {}
for i = 1, 60 do
    local p = Instance.new("Frame")
    p.Size = UDim2.new(0, 3, 0, 3)
    p.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    p.BackgroundTransparency = 0.5
    p.BorderSizePixel = 0
    p.ZIndex = 5
    p.Parent = mainFrame
    Instance.new("UICorner", p).CornerRadius = UDim.new(1, 0)
    particles[i] = {p = p, phase = math.random() * math.pi * 2}
end

local lastTime = tick()
RunService.Heartbeat:Connect(function()
    local dt = tick() - lastTime
    lastTime = tick()
    for _, data in ipairs(particles) do
        data.phase = data.phase + dt * 0.8  -- Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾!
        local x = 0.1 + math.sin(data.phase) * 0.4
        local y = 0.1 + math.cos(data.phase * 1.1) * 0.4
        data.p.Position = UDim2.new(x, 0, y, 0)
        data.p.BackgroundTransparency = 0.3 + math.sin(data.phase * 3) * 0.3
    end
end)

-- Toggle / Slider (Ð´Ð»Ñ Ñ‚Ð°Ð±Ð¾Ð²)
local function createToggle(content, name, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 35)
    frame.BackgroundTransparency = 1
    frame.Parent = content
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0.75, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = name
    label.TextColor3 = Color3.fromRGB(220, 220, 220)
    label.TextSize = 16
    label.Font = Enum.Font.GothamSemibold
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame
    
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 45, 0, 25)
    btn.Position = UDim2.new(1, -50, 0, 5)
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.Text = "OFF"
    btn.TextColor3 = Color3.fromRGB(180, 180, 180)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.Parent = frame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
    
    local enabled = false
    btn.MouseButton1Click:Connect(function()
        enabled = not enabled
        btn.Text = enabled and "ON" or "OFF"
        btn.BackgroundColor3 = enabled and Color3.fromRGB(0, 200, 120) or Color3.fromRGB(50, 50, 50)
        btn.TextColor3 = enabled and Color3.fromRGB(255, 255, 255) or Color3.fromRGB(180, 180, 180)
        callback(enabled)
    end)
end

local function createSlider(content, name, min, max, default, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 55)
    frame.BackgroundTransparency = 1
    frame.Parent = content
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, 25)
    label.BackgroundTransparency = 1
    label.Text = name .. ": " .. default
    label.TextColor3 = Color3.fromRGB(220, 220, 220)
    label.TextSize = 15
    label.Font = Enum.Font.Gotham
    label.Parent = frame
    
    local barBg = Instance.new("Frame")
    barBg.Size = UDim2.new(1, 0, 0, 6)
    barBg.Position = UDim2.new(0, 0, 1, -10)
    barBg.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    barBg.Parent = frame
    Instance.new("UICorner", barBg).CornerRadius = UDim.new(1, 0)
    
    local fill = Instance.new("Frame")
    fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
    fill.BackgroundColor3 = Color3.fromRGB(100, 200, 255)
    fill.Parent = barBg
    Instance.new("UICorner", fill).CornerRadius = UDim.new(1, 0)
    
    local knob = Instance.new("Frame")
    knob.Size = UDim2.new(0, 20, 0, 20)
    knob.Position = UDim2.new((default - min) / (max - min), -10, 0.5, -10)
    knob.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    knob.Parent = barBg
    Instance.new("UICorner", knob).CornerRadius = UDim.new(1, 0)
    
    local dragging = false
    knob.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true end
    end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
    end)
    RunService.RenderStepped:Connect(function()
        if dragging and barBg.AbsoluteSize.X > 0 then
            local mousePos = UserInputService:GetMouseLocation()
            local relX = math.clamp((mousePos.X - barBg.AbsolutePosition.X) / barBg.AbsoluteSize.X, 0, 1)
            local value = math.floor(min + (max - min) * relX)
            knob.Position = UDim2.new(relX, -10, 0.5, -10)
            fill.Size = UDim2.new(relX, 0, 1, 0)
            label.Text = name .. ": " .. value
            callback(value)
        end
    end)
end

-- Movement Tab
createToggle(tabContents["Movement"], "Fly (WASD QE)", function(v)
    Settings.Fly = v
    local char = player.Character
    if not char then return end
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    if v then
        flyBodyVelocity = Instance.new("BodyVelocity")
        flyBodyVelocity.MaxForce = Vector3.new(1e5, 1e5, 1e5)
        flyBodyVelocity.Velocity = Vector3.new(0, 0.1, 0)
        flyBodyVelocity.Parent = root
    else
        if flyBodyVelocity then flyBodyVelocity:Destroy() flyBodyVelocity = nil end
    end
end)

createSlider(tabContents["Movement"], "Fly Speed", 1, 200, 50, function(v) Settings.FlySpeed = v end)
createToggle(tabContents["Movement"], "Noclip", function(v)
    Settings.Noclip = v
    if noclipConnection then noclipConnection:Disconnect() end
    if v then
        noclipConnection = RunService.Stepped:Connect(function()
            if player.Character then
                for _, part in ipairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") then part.CanCollide = false end
                end
            end
        end)
    end
end)
createSlider(tabContents["Movement"], "Walk Speed", 16, 500, 16, function(v)
    Settings.Speed = v
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.WalkSpeed = v
    end
end)
createToggle(tabContents["Movement"], "Infinite Jump", function(v) Settings.InfiniteJump = v end)

-- Fly Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ
RunService.RenderStepped:Connect(function()
    if Settings.Fly and flyBodyVelocity and player.Character then
        local root = player.Character.HumanoidRootPart
        local moveVector = Vector3.new()
        local camCFrame = camera.CFrame
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then moveVector += camCFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then moveVector -= camCFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then moveVector -= camCFrame.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then moveVector += camCFrame.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.E) or UserInputService:IsKeyDown(Enum.KeyCode.Space) then moveVector += Vector3.new(0,1,0) end
        if UserInputService:IsKeyDown(Enum.KeyCode.Q) or UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then moveVector -= Vector3.new(0,1,0) end
        if moveVector.Magnitude > 0 then moveVector = moveVector.Unit end
        flyBodyVelocity.Velocity = moveVector * Settings.FlySpeed
        root.AssemblyAngularVelocity = Vector3.new(0,0,0)
    end
end)

UserInputService.JumpRequest:Connect(function()
    if Settings.InfiniteJump and player.Character then
        local hum = player.Character:FindFirstChildOfClass("Humanoid")
        if hum then hum:ChangeState(Enum.HumanoidStateType.Jumping) end
    end
end)

player.CharacterAdded:Connect(function(char)
    local hum = char:WaitForChild("Humanoid")
    hum.WalkSpeed = Settings.Speed
end)

-- Visuals Tab
createToggle(tabContents["Visuals"], "ESP (Green/Red)", function(v)
    Settings.ESP = v
    if espConnection then espConnection:Disconnect() end
    for plr, _ in pairs(drawings.boxes) do
        if drawings.boxes[plr] then drawings.boxes[plr]:Remove() end
        if drawings.names[plr] then drawings.names[plr]:Remove() end
    end
    drawings.boxes = {}
    drawings.names = {}
    if not v then return end
    espConnection = RunService.RenderStepped:Connect(function()
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr == player or not plr.Character then continue end
            local root = plr.Character:FindFirstChild("HumanoidRootPart")
            local head = plr.Character:FindFirstChild("Head")
            local hum = plr.Character:FindFirstChild("Humanoid")
            if not (root and head and hum and hum.Health > 0) then
                if drawings.boxes[plr] then drawings.boxes[plr].Visible = false end
                if drawings.names[plr] then drawings.names[plr].Visible = false end
                continue
            end
            local rootPos = root.Position
            local headPos = camera:WorldToViewportPoint(head.Position + Vector3.new(0,0.5,0))
            local legPos = camera:WorldToViewportPoint(rootPos - Vector3.new(0,4,0))
            local _, onScreen = camera:WorldToViewportPoint(rootPos)
            if not onScreen then
                if drawings.boxes[plr] then drawings.boxes[plr].Visible = false end
                if drawings.names[plr] then drawings.names[plr].Visible = false end
                continue
            end
            local params = RaycastParams.new()
            params.FilterType = Enum.RaycastFilterType.Blacklist
            params.FilterDescendantsInstances = {player.Character, plr.Character}
            local rayHit = Workspace:Raycast(camera.CFrame.Position, (rootPos - camera.CFrame.Position).Unit * 500, params)
            local color = rayHit and Color3.fromRGB(255,0,0) or Color3.fromRGB(0,255,0)
            local height = math.abs(headPos.Y - legPos.Y)
            local width = height * 0.45
            if not drawings.boxes[plr] then
                drawings.boxes[plr] = Drawing.new("Quad")
                drawings.boxes[plr].Thickness = 2
                drawings.boxes[plr].Transparency = 1
                drawings.boxes[plr].Filled = false
            end
            local box = drawings.boxes[plr]
            box.PointA = Vector2.new(headPos.X - width/2, headPos.Y)
            box.PointB = Vector2.new(headPos.X + width/2, headPos.Y)
            box.PointC = Vector2.new(headPos.X + width/2, legPos.Y)
            box.PointD = Vector2.new(headPos.X - width/2, legPos.Y)
            box.Color = color
            box.Visible = true
            if not drawings.names[plr] then
                drawings.names[plr] = Drawing.new("Text")
                drawings.names[plr].Size = 15
                drawings.names[plr].Center = true
                drawings.names[plr].Outline = true
                drawings.names[plr].Font = 2
            end
            local txt = drawings.names[plr]
            local dist = math.floor((player.Character.HumanoidRootPart.Position - rootPos).Magnitude)
            txt.Text = plr.Name .. "\n[" .. dist .. "m]"
            txt.Position = Vector2.new(headPos.X, headPos.Y - 25)
            txt.Color = color
            txt.Visible = true
        end
    end)
end)

-- Combat Tab (Aimbot Auto)
createToggle(tabContents["Combat"], "Aimbot (Auto)", function(v)
    Settings.Aimbot = v
    if aimbotConnection then aimbotConnection:Disconnect() end
    if drawings.fovCircle then drawings.fovCircle:Remove() drawings.fovCircle = nil end
    if not v then return end
    drawings.fovCircle = Drawing.new("Circle")
    drawings.fovCircle.Thickness = 2
    drawings.fovCircle.Color = Color3.fromRGB(255, 100, 100)
    drawings.fovCircle.Transparency = 0.8
    drawings.fovCircle.NumSides = 64
    drawings.fovCircle.Visible = true
    aimbotConnection = RunService.RenderStepped:Connect(function()
        drawings.fovCircle.Position = Vector2.new(camera.ViewportSize.X / 2, camera.ViewportSize.Y / 2)
        drawings.fovCircle.Radius = Settings.AimbotFOV / 2 * (camera.ViewportSize.Y / math.tan(math.rad(camera.FieldOfView / 2)))
        local closest = nil
        local minDist = math.huge
        local screenCenter = Vector2.new(camera.ViewportSize.X / 2, camera.ViewportSize.Y / 2)
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr == player or not plr.Character or not plr.Character:FindFirstChild("Head") then continue end
            if Settings.TeamCheck and plr.Team == player.Team then continue end
            local head = plr.Character.Head
            local screenPos, onScreen = camera:WorldToViewportPoint(head.Position)
            if not onScreen then continue end
            local params = RaycastParams.new()
            params.FilterType = Enum.RaycastFilterType.Blacklist
            params.FilterDescendantsInstances = {player.Character, plr.Character}
            local rayHit = Workspace:Raycast(camera.CFrame.Position, (head.Position - camera.CFrame.Position).Unit * 500, params)
            if rayHit then continue end
            local dist = (Vector2.new(screenPos.X, screenPos.Y) - screenCenter).Magnitude
            if dist < minDist and dist < drawings.fovCircle.Radius then
                minDist = dist
                closest = head
            end
        end
        if closest then
            local targetCFrame = CFrame.lookAt(camera.CFrame.Position, closest.Position)
            camera.CFrame = camera.CFrame:Lerp(targetCFrame, Settings.AimbotSmooth)
        end
    end)
end)
createSlider(tabContents["Combat"], "Aimbot FOV", 30, 360, 120, function(v) Settings.AimbotFOV = v end)
createSlider(tabContents["Combat"], "Aimbot Smooth", 0.05, 0.5, 0.15, function(v) Settings.AimbotSmooth = v end)
createToggle(tabContents["Combat"], "Team Check", function(v) Settings.TeamCheck = v end)

Players.PlayerRemoving:Connect(function(plr)
    if drawings.boxes[plr] then drawings.boxes[plr]:Remove() end
    if drawings.names[plr] then drawings.names[plr]:Remove() end
end)

print("Salt V5.1 Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½ â€” V5 + Ð¢Ð°Ð±Ñ‹! Ð’ÑÑ‘ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ðŸš€")
