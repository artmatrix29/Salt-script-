-- Salt V5 — простое меню для управления Settings
-- Вставьте этот блок в конец вашего LocalScript (тот же скрипт, где определена таблица Settings)

local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Ждём PlayerGui
local playerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Если GUI уже есть — удалим старую копию
local existing = playerGui:FindFirstChild("SaltV5_GUI")
if existing then
    pcall(function() existing:Destroy() end)
end

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SaltV5_GUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Основная панель
local frame = Instance.new("Frame")
frame.Name = "Main"
frame.Size = UDim2.new(0, 320, 0, 360)
frame.Position = UDim2.new(0, 10, 0, 50)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.AnchorPoint = Vector2.new(0, 0)
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "Salt V5 — Menu (M to toggle)"
title.TextColor3 = Color3.fromRGB(220, 220, 220)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18
title.Parent = frame

local function makeLine(y)
    local line = Instance.new("Frame")
    line.Size = UDim2.new(1, -10, 0, 1)
    line.Position = UDim2.new(0, 5, 0, y)
    line.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    line.BorderSizePixel = 0
    line.Parent = frame
    return line
end

-- helper to create toggle button
local function createToggle(name, settingKey, y)
    local lbl = Instance.new("TextLabel")
    lbl.Size = UDim2.new(0.6, -10, 0, 28)
    lbl.Position = UDim2.new(0, 10, 0, y)
    lbl.BackgroundTransparency = 1
    lbl.Text = name
    lbl.TextColor3 = Color3.fromRGB(200,200,200)
    lbl.Font = Enum.Font.SourceSans
    lbl.TextSize = 16
    lbl.TextXAlignment = Enum.TextXAlignment.Left
    lbl.Parent = frame

    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.35, -10, 0, 28)
    btn.Position = UDim2.new(0.65, 0, 0, y)
    btn.BackgroundColor3 = Color3.fromRGB(140, 30, 30)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 16
    btn.Parent = frame

    local function refresh()
        local val = Settings[settingKey]
        if val then
            btn.Text = "ON"
            btn.BackgroundColor3 = Color3.fromRGB(30, 140, 60)
        else
            btn.Text = "OFF"
            btn.BackgroundColor3 = Color3.fromRGB(140, 30, 30)
        end
    end

    btn.MouseButton1Click:Connect(function()
        Settings[settingKey] = not not (not not (not not nil) and not Settings[settingKey]) -- silly-safe toggle
        Settings[settingKey] = not Settings[settingKey]
        refresh()
    end)

    refresh()
    return btn
end

-- helper to create numeric control (minus, value, plus)
local function createNumberControl(name, settingKey, y, step, minVal, maxVal, formatFunc)
    step = step or 1
    minVal = (minVal ~= nil) and minVal or -1e9
    maxVal = (maxVal ~= nil) and maxVal or 1e9
    formatFunc = formatFunc or tostring

    local lbl = Instance.new("TextLabel")
    lbl.Size = UDim2.new(0.5, -10, 0, 28)
    lbl.Position = UDim2.new(0, 10, 0, y)
    lbl.BackgroundTransparency = 1
    lbl.Text = name
    lbl.TextColor3 = Color3.fromRGB(200,200,200)
    lbl.Font = Enum.Font.SourceSans
    lbl.TextSize = 16
    lbl.TextXAlignment = Enum.TextXAlignment.Left
    lbl.Parent = frame

    local minus = Instance.new("TextButton")
    minus.Size = UDim2.new(0, 36, 0, 28)
    minus.Position = UDim2.new(0.6, 0, 0, y)
    minus.Text = "-"
    minus.Font = Enum.Font.SourceSansBold
    minus.TextSize = 20
    minus.Parent = frame

    local valLabel = Instance.new("TextLabel")
    valLabel.Size = UDim2.new(0.25, -10, 0, 28)
    valLabel.Position = UDim2.new(0.6, 40, 0, y)
    valLabel.BackgroundColor3 = Color3.fromRGB(40,40,40)
    valLabel.TextColor3 = Color3.fromRGB(230,230,230)
    valLabel.Font = Enum.Font.SourceSans
    valLabel.TextSize = 16
    valLabel.Parent = frame

    local plus = Instance.new("TextButton")
    plus.Size = UDim2.new(0, 36, 0, 28)
    plus.Position = UDim2.new(0.88, -10, 0, y)
    plus.Text = "+"
    plus.Font = Enum.Font.SourceSansBold
    plus.TextSize = 20
    plus.Parent = frame

    local function refresh()
        local v = Settings[settingKey]
        if typeof(v) == "number" then
            valLabel.Text = formatFunc(v)
        else
            valLabel.Text = tostring(v)
        end
    end

    minus.MouseButton1Click:Connect(function()
        if typeof(Settings[settingKey]) == "number" then
            Settings[settingKey] = math.clamp(Settings[settingKey] - step, minVal, maxVal)
            refresh()
        end
    end)
    plus.MouseButton1Click:Connect(function()
        if typeof(Settings[settingKey]) == "number" then
            Settings[settingKey] = math.clamp(Settings[settingKey] + step, minVal, maxVal)
            refresh()
        end
    end)

    refresh()
    return {minus = minus, plus = plus, label = valLabel}
end

-- Создаём элементы
local y = 40
local pad = 34

createToggle("ESP", "ESP", y); y = y + pad
createToggle("Aimbot", "Aimbot", y); y = y + pad
createToggle("Click TP (Z)", "ClickTeleport", y); y = y + pad
createToggle("Fly", "Fly", y); y = y + pad
createToggle("Noclip", "Noclip", y); y = y + pad
createToggle("Infinite Jump", "InfiniteJump", y); y = y + pad

-- numeric controls
y = y + 4
createNumberControl("Fly Speed", "FlySpeed", y, 10, 0, 1000, function(v) return tostring(math.floor(v)) end); y = y + pad
createNumberControl("Walk Speed", "WalkSpeed", y, 1, 0, 100, function(v) return tostring(math.floor(v)) end); y = y + pad
createNumberControl("Aimbot FOV", "AimbotFOV", y, 5, 5, 180, function(v) return tostring(math.floor(v)) .. "°" end); y = y + pad
createNumberControl("Aimbot Smooth", "AimbotSmooth", y, 0.05, 0, 1, function(v) return string.format("%.2f", v) end); y = y + pad

-- Скрыть/показать меню клавишей M
local visible = true
local function setVisible(v)
    visible = v
    frame.Visible = visible
end
setVisible(true)

UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    if input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == Enum.KeyCode.M then
        setVisible(not visible)
    end
end)

-- Авто-обновление значений UI, если Settings меняются извне
RunService.Heartbeat:Connect(function()
    -- обновляем все подписанные элементы: простейший способ — пройти всё потом обновить значения
    -- (в текущей реализации элементы сами работают с таблицей Settings; это позволяется)
end)

print("SaltV5 UI loaded. Нажмите M для скрытия/показа меню.")
