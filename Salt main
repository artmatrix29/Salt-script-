-- salt v2 | fixed & stable UI build

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RS = game:GetService("RunService")
local WS = game:GetService("Workspace")

local Player = Players.LocalPlayer
local Mouse = Player:GetMouse()

-- STATES
local flying, noclipping, antiGrab, backTP, tracking = false,false,false,false,false
local selectedTarget = nil

local grabReach, pullStrength, throwStrength = 100,10,1500
local tpKey = Enum.KeyCode.Z

-- GUI ROOT
local ScreenGui = Instance.new("ScreenGui", Player.PlayerGui)
ScreenGui.Name = "saltv2"
ScreenGui.IgnoreGuiInset = true
ScreenGui.ResetOnSpawn = false
ScreenGui.DisplayOrder = 9999

local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0,500,0,520)
Main.Position = UDim2.new(0.5,-250,0.5,-260)
Main.BackgroundColor3 = Color3.new(0,0,0)
Main.Active = true
Main.Draggable = true
Main.ZIndex = 1

Instance.new("UICorner", Main).CornerRadius = UDim.new(0,12)

-- TITLE
local Title = Instance.new("TextLabel", Main)
Title.Size = UDim2.new(1,0,0,50)
Title.BackgroundTransparency = 1
Title.Text = "salt v2"
Title.TextColor3 = Color3.fromRGB(0,255,128)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 24
Title.ZIndex = 2

-- CLOSE
local Close = Instance.new("TextButton", Main)
Close.Size = UDim2.new(0,35,0,35)
Close.Position = UDim2.new(1,-45,0,8)
Close.Text = "X"
Close.TextColor3 = Color3.fromRGB(255,80,80)
Close.BackgroundColor3 = Color3.fromRGB(40,40,40)
Close.ZIndex = 3
Close.MouseButton1Click:Connect(function()
	Main.Visible = false
end)

-- TABS
local Tabs = Instance.new("Frame", Main)
Tabs.Position = UDim2.new(0,10,0,60)
Tabs.Size = UDim2.new(1,-20,0,40)
Tabs.BackgroundColor3 = Color3.fromRGB(20,20,20)
Tabs.ZIndex = 2

local function tab(text,pos)
	local b = Instance.new("TextButton", Tabs)
	b.Size = UDim2.new(0.33,0,1,0)
	b.Position = pos
	b.Text = text
	b.BackgroundColor3 = Color3.fromRGB(30,30,30)
	b.TextColor3 = Color3.fromRGB(0,255,128)
	b.TextSize = 18
	b.ZIndex = 3
	return b
end

local DefenseTab = tab("Defense",UDim2.new(0,0,0,0))
local AttackTab  = tab("Attack", UDim2.new(0.33,0,0,0))
local MiscTab    = tab("Misc",   UDim2.new(0.66,0,0,0))

-- PAGES
local function page()
	local f = Instance.new("Frame", Main)
	f.Position = UDim2.new(0,10,0,110)
	f.Size = UDim2.new(1,-20,1,-170)
	f.BackgroundTransparency = 1
	f.Visible = false
	f.Active = false
	f.ZIndex = 2
	return f
end

local DefensePage = page()
local AttackPage  = page()
local MiscPage    = page()

local function show(p)
	for _,v in ipairs({DefensePage,AttackPage,MiscPage}) do
		v.Visible = false
		v.Active = false
	end
	p.Visible = true
	p.Active = true
end

show(DefensePage)

DefenseTab.MouseButton1Click:Connect(function() show(DefensePage) end)
AttackTab.MouseButton1Click:Connect(function() show(AttackPage) end)
MiscTab.MouseButton1Click:Connect(function() show(MiscPage) end)

-- DEFENSE BUTTONS
local function defBtn(text,y)
	local b = Instance.new("TextButton", DefensePage)
	b.Size = UDim2.new(0.9,0,0,45)
	b.Position = UDim2.new(0.05,0,y,0)
	b.BackgroundColor3 = Color3.fromRGB(80,80,80)
	b.TextColor3 = Color3.fromRGB(200,200,200)
	b.TextSize = 18
	b.Text = text
	b.ZIndex = 3
	return b
end

local AntiGrabBtn = defBtn("Anti-Grab: OFF",0.05)
local BackTPBtn   = defBtn("Back TP on Grab: OFF",0.2)

AntiGrabBtn.MouseButton1Click:Connect(function()
	antiGrab = not antiGrab
	AntiGrabBtn.Text = "Anti-Grab: "..(antiGrab and "ON" or "OFF")
	AntiGrabBtn.BackgroundColor3 = antiGrab and Color3.fromRGB(0,255,128) or Color3.fromRGB(80,80,80)
end)

BackTPBtn.MouseButton1Click:Connect(function()
	backTP = not backTP
	BackTPBtn.Text = "Back TP on Grab: "..(backTP and "ON" or "OFF")
	BackTPBtn.BackgroundColor3 = backTP and Color3.fromRGB(0,255,128) or Color3.fromRGB(80,80,80)
end)

-- MISC
local layout = Instance.new("UIListLayout", MiscPage)
layout.Padding = UDim.new(0,10)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local function miscBtn(text)
	local b = Instance.new("TextButton", MiscPage)
	b.Size = UDim2.new(0.9,0,0,45)
	b.BackgroundColor3 = Color3.fromRGB(80,80,80)
	b.TextColor3 = Color3.fromRGB(200,200,200)
	b.TextSize = 18
	b.Text = text
	b.ZIndex = 3
	return b
end

local TPBtn     = miscBtn("TP to Selected")
local TrackBtn  = miscBtn("Tracking: OFF")
local FlyBtn    = miscBtn("Fly: OFF")
local NoclipBtn = miscBtn("Noclip: OFF")

-- SCROLL
local PlayersScroll = Instance.new("ScrollingFrame", MiscPage)
PlayersScroll.Size = UDim2.new(0.9,0,0.35,0)
PlayersScroll.CanvasSize = UDim2.new(0,0,0,0)
PlayersScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
PlayersScroll.BackgroundColor3 = Color3.fromRGB(10,10,10)
PlayersScroll.ScrollBarImageColor3 = Color3.fromRGB(0,255,128)
PlayersScroll.ClipsDescendants = true
PlayersScroll.ZIndex = 3

Instance.new("UIListLayout", PlayersScroll)

-- TP BUTTON
TPBtn.MouseButton1Click:Connect(function()
	if selectedTarget and selectedTarget.Character and Player.Character then
		Player.Character.HumanoidRootPart.CFrame =
			selectedTarget.Character.HumanoidRootPart.CFrame * CFrame.new(0,0,-6)
	end
end)

print("salt v2 — стабильная версия загружена")
